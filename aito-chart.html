<link rel="import" href="bower_components/polymer/polymer.html">

<link rel="import" href="bower_components/google-chart/google-chart.html">

<dom-module id="aito-chart">
	<template>
		<google-chart type='area' options='{{options}}' data='{{array}}' data='{{data}}'>
		</google-chart>

	</template>

</dom-module>

<script>

Polymer({

    is: 'aito-chart',

    properties: {
    	options: Object,
    },

    ready: function() {
    	this.getArray();
    	this.options = {
		  title: "Chart title goes here",
		  hAxis: {title: "Categories", minValue: 0},
		  vAxis: {title: "Values", minValue: 0, maxValue: 100},
		  legend: "none"
		};

		var data = [["Day", "Likes"], ["Jan", 31], ["Feb", 28], ["Mar", 31]];
    	//console.log(this);
    	//console.log(this.execRegExp());

    },

    getArray: function() {
    	//var myArray = [["Day", "Likes"]];
    	var myArray = [];
    	var that = this;

    	$.getJSON('get-aito.json', function(data){
    		//return data.items[0].stats[1].history;
    		
    		var obj = data.items[0].stats[1].history;
			var re = /..:..:../;

			for (var prop in obj) {
				var val = obj[prop];
	  			var p = re.exec(prop);
				p = p[0];
				//p = Date.parse(p);
				//console.log(p);
				var tempArray = [p, val];
				myArray.push(tempArray);

				// console.log(this);
			}

			myArray = _.sortBy(myArray, function(arr) { return arr[0] });
			var maxVal = _.max(myArray, function(arr){ return arr[1]; });
    		console.log(maxVal);

			console.log(myArray);
			myArray.unshift(["Day", "Likes"]);
			console.log(myArray);
			that.array = myArray;
		});	

		
    },

    // sortByPublishedDate: function() {
    // 	return _.sortBy(this.items, function(array) { return array.published })
    // }

    // {"title": "Distribution of days in 2001Q1", "hAxis": {"title": "Time"}, "vAxis": {"title": "Likes"}}

});  

</script>
